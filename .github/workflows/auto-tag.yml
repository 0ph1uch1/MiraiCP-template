name: auto tag

on:
  push:
    branches: main
jobs:
  tag:
    runs-on: ubuntu-latest
    steps:
    - name: Create tag
      uses: actions/github-script@v5
      with:
       github-token: ${{ secrets.GITHUB_TOKEN }}
       script: |
           if("${{github.event.head_commit.message}}".startsWith("v")){
             github.rest.git.createTag({
               owner: context.repo.owner,
               repo: "MiraiCP-template",
               tag: "${{github.event.head_commit.message}}",
               message: "${{github.event.head_commit.message}}",
               object: ${{ github.sha }},
               type: "commit",
               tagger: {
                 name: "Eritque arcus",
                 email: "1930893235@qq.com"
               }
             })
           }
